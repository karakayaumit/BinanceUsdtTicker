<Window x:Class="BinanceUsdtTicker.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        Title="Binance USDT CanlÄ± Fiyatlar"
        Height="680" Width="1100" MinHeight="500" MinWidth="900"
        Background="{DynamicResource Surface}"
        Foreground="{DynamicResource OnSurface}">

	<!-- ========== RESOURCES ========== -->
	<Window.Resources>
		<!-- Åžeffaf yÄ±ldÄ±z -->
		<Style x:Key="StarToggleStyle" TargetType="ToggleButton">
			<Setter Property="OverridesDefaultStyle" Value="True"/>
			<Setter Property="Background" Value="Transparent"/>
			<Setter Property="BorderThickness" Value="0"/>
			<Setter Property="Padding" Value="0"/>
			<Setter Property="Focusable" Value="False"/>
			<Setter Property="FocusVisualStyle" Value="{x:Null}"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="ToggleButton">
						<ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
                </Style>

                <!-- Grafik butonu: arka plan temaya gÃ¶re uyarlanÄ±r -->
                <Style x:Key="ChartButtonStyle" TargetType="Button">
                        <Setter Property="OverridesDefaultStyle" Value="True"/>
                        <!-- HÃ¼cre arka planÄ±nÄ± miras al -->
                        <Setter Property="Background"
                                Value="{Binding RelativeSource={RelativeSource AncestorType=DataGridCell}, Path=Background}"/>
                        <Setter Property="BorderThickness" Value="0"/>
                        <Setter Property="Padding" Value="0"/>
                        <Setter Property="Focusable" Value="False"/>
                        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
                        <Setter Property="Template">
                                <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                                <Border x:Name="Bd" Background="{TemplateBinding Background}">
                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter TargetName="Bd" Property="Background" Value="{DynamicResource RowHoverBg}"/>
                                                        </Trigger>
                                                        <Trigger Property="IsPressed" Value="True">
                                                                <Setter TargetName="Bd" Property="Background" Value="{DynamicResource RowHoverBg}"/>
                                                        </Trigger>
                                                </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                </Setter.Value>
                        </Setter>
                </Style>

                <!-- DataGrid baÅŸlÄ±ÄŸÄ± -->
                <Style TargetType="DataGridColumnHeader">
			<Setter Property="Background"  Value="{DynamicResource HeaderBg}"/>
			<Setter Property="Foreground"  Value="{DynamicResource HeaderFg}"/>
			<Setter Property="BorderBrush" Value="{DynamicResource HeaderBorder}"/>
			<Setter Property="BorderThickness" Value="0,0,1,1"/>
			<Setter Property="FontWeight"  Value="SemiBold"/>
			<Setter Property="HorizontalContentAlignment" Value="Center"/>
			<Setter Property="Padding" Value="6,3"/>
			<Style.Triggers>
				<Trigger Property="IsMouseOver" Value="True">
					<Setter Property="Background" Value="{DynamicResource HeaderHoverBg}"/>
				</Trigger>
				<Trigger Property="IsPressed" Value="True">
					<Setter Property="Background" Value="{DynamicResource HeaderHoverBg}"/>
				</Trigger>
			</Style.Triggers>
		</Style>

		<!-- GridView baÅŸlÄ±ÄŸÄ± -->
		<Style TargetType="{x:Type GridViewColumnHeader}">
			<Setter Property="Background"  Value="{DynamicResource HeaderBg}"/>
			<Setter Property="Foreground"  Value="{DynamicResource HeaderFg}"/>
			<Setter Property="BorderBrush" Value="{DynamicResource HeaderBorder}"/>
			<Setter Property="BorderThickness" Value="0,0,1,1"/>
			<Setter Property="FontWeight"  Value="SemiBold"/>
			<Setter Property="HorizontalContentAlignment" Value="Center"/>
			<Setter Property="Padding" Value="6,3"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="{x:Type GridViewColumnHeader}">
						<Border x:Name="Bd"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
							<ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                              VerticalAlignment="Center"
                                              Margin="{TemplateBinding Padding}"/>
						</Border>
						<ControlTemplate.Triggers>
							<Trigger Property="IsMouseOver" Value="True">
								<Setter TargetName="Bd" Property="Background" Value="{DynamicResource HeaderHoverBg}"/>
							</Trigger>
							<Trigger Property="IsPressed" Value="True">
								<Setter TargetName="Bd" Property="Background" Value="{DynamicResource HeaderHoverBg}"/>
							</Trigger>
						</ControlTemplate.Triggers>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>

                <!-- Button styles moved to global dictionary -->

                <!-- ToolBar TextBox -->
                <Style x:Key="{x:Static ToolBar.TextBoxStyleKey}"
                       TargetType="TextBox"
                       BasedOn="{StaticResource {x:Type TextBox}}">
                        <Setter Property="Background"      Value="{DynamicResource SurfaceAlt}"/>
                        <Setter Property="Foreground"      Value="{DynamicResource TbFg}"/>
                        <Setter Property="BorderBrush"     Value="{DynamicResource TbBorder}"/>
                        <Setter Property="BorderThickness" Value="1"/>
                        <Setter Property="Padding"         Value="6,2"/>
                        <Setter Property="MinWidth"        Value="220"/>
                        <Style.Triggers>
                                <Trigger Property="IsKeyboardFocusWithin" Value="True">
                                        <Setter Property="Background"  Value="{DynamicResource TbHover}"/>
                                        <Setter Property="BorderBrush" Value="{DynamicResource TbBorder}"/>
                                </Trigger>
                                <Trigger Property="IsEnabled" Value="False">
                                        <Setter Property="Opacity" Value="0.6"/>
                                </Trigger>
                        </Style.Triggers>
                </Style>
                <Style TargetType="ToolBar">
                        <Setter Property="Background" Value="{DynamicResource TbBg}"/>
                        <Setter Property="Foreground" Value="{DynamicResource TbFg}"/>
                </Style>

                <!-- ListView items -->
                <Style TargetType="ListViewItem">
                        <Setter Property="Background"  Value="{DynamicResource SurfaceAlt}"/>
                        <Setter Property="Foreground"  Value="{DynamicResource OnSurface}"/>
                        <Setter Property="BorderBrush" Value="{DynamicResource Divider}"/>
                        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                        <Setter Property="Focusable" Value="False"/>
                        <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="{DynamicResource RowHoverBg}"/>
                                </Trigger>
                                <Trigger Property="IsSelected" Value="True">
                                        <Setter Property="Background" Value="{DynamicResource SelectionBg}"/>
                                        <Setter Property="Foreground" Value="{DynamicResource SelectionFg}"/>
                                </Trigger>
                        </Style.Triggers>
                </Style>

		<!-- DataGrid hÃ¼cre -->
                <Style TargetType="DataGridCell">
                        <Setter Property="BorderBrush" Value="{DynamicResource Divider}"/>
                        <Style.Triggers>
                                <Trigger Property="IsSelected" Value="True">
                                        <Setter Property="Background" Value="{DynamicResource SelectionBg}"/>
                                        <Setter Property="Foreground" Value="{DynamicResource SelectionFg}"/>
                                </Trigger>
                        </Style.Triggers>
                </Style>

                <Style TargetType="DataGridRowHeader">
                        <Setter Property="Background"  Value="{DynamicResource SurfaceAlt}"/>
                        <Setter Property="Foreground"  Value="{DynamicResource OnSurface}"/>
                        <Setter Property="BorderBrush" Value="{DynamicResource Divider}"/>
                </Style>

		<!-- Scrollbar -->
                <Style x:Key="App.ScrollThumbStyle" TargetType="Thumb">
                        <Setter Property="Background"   Value="{DynamicResource TbBg}"/>
                        <Setter Property="BorderBrush"  Value="{DynamicResource Divider}"/>
                        <Setter Property="BorderThickness" Value="1"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="Thumb">
						<Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="3"/>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
			<Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="{DynamicResource TbHover}"/>
                                </Trigger>
                                <Trigger Property="IsDragging" Value="True">
                                        <Setter Property="Background" Value="{DynamicResource TbPressed}"/>
                                </Trigger>
			</Style.Triggers>
		</Style>
                <Style TargetType="ScrollBar">
                        <Setter Property="Background" Value="{DynamicResource SurfaceAlt}"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="ScrollBar">
						<Grid Background="{TemplateBinding Background}">


							<Track x:Name="PART_Track" Orientation="{TemplateBinding Orientation}">
								<Track.DecreaseRepeatButton>
									<RepeatButton Opacity="0" IsHitTestVisible="False"/>
								</Track.DecreaseRepeatButton>
								<Track.IncreaseRepeatButton>
									<RepeatButton Opacity="0" IsHitTestVisible="False"/>
								</Track.IncreaseRepeatButton>
								<Track.Thumb>
									<Thumb Style="{StaticResource App.ScrollThumbStyle}"/>
								</Track.Thumb>
							</Track>
						</Grid>
						<ControlTemplate.Triggers>
							<Trigger Property="Orientation" Value="Vertical">
								<Setter TargetName="PART_Track" Property="IsDirectionReversed" Value="True"/>
							</Trigger>
							<Trigger Property="Orientation" Value="Horizontal">
								<Setter TargetName="PART_Track" Property="IsDirectionReversed" Value="False"/>
							</Trigger>
						</ControlTemplate.Triggers>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
			<Style.Triggers>
				<Trigger Property="Orientation" Value="Vertical">
					<Setter Property="Width"  Value="12"/>
					<Setter Property="Height" Value="{x:Static sys:Double.NaN}"/>
				</Trigger>
				<Trigger Property="Orientation" Value="Horizontal">
					<Setter Property="Height" Value="12"/>
					<Setter Property="Width"  Value="{x:Static sys:Double.NaN}"/>
				</Trigger>
			</Style.Triggers>
		</Style>

		<!-- Toolbar grup kutusu -->
                <Style x:Key="ToolbarGroup" TargetType="Border">
                        <Setter Property="CornerRadius" Value="6"/>
                        <Setter Property="BorderBrush" Value="{DynamicResource Divider}"/>
                        <Setter Property="BorderThickness" Value="1"/>
                        <Setter Property="Background" Value="{DynamicResource SurfaceAlt}"/>
                        <Setter Property="Padding" Value="6,4"/>
                        <Setter Property="Margin" Value="8,0,0,0"/>
                </Style>
	</Window.Resources>

        <DockPanel LastChildFill="True">

                <Border DockPanel.Dock="Top" Background="{DynamicResource TbBg}" BorderBrush="{DynamicResource TbBorder}" BorderThickness="0,0,0,1">
                        <ToolBarTray Panel.ZIndex="10" IsLocked="True" HorizontalAlignment="Stretch" Background="{DynamicResource TbBg}">
                                <ToolBar Band="0" BandIndex="0" ToolBarTray.IsLocked="True" HorizontalAlignment="Stretch">
                                <ToolBar.Resources>
                                        <!-- Neutralize any app-wide ScrollViewer ControlTemplate that may cause circular template issues in ToolBar/TextBox -->
                                        <Style TargetType="{x:Type ScrollViewer}" BasedOn="{x:Null}" />

					<!-- Also force TextBox in ToolBar to use a safe template whose PART_ContentHost ScrollViewer does NOT pick implicit styles -->
                                        <Style TargetType="{x:Type TextBox}">
                                                <Setter Property="BorderBrush" Value="{DynamicResource TbBorder}"/>
                                                <Setter Property="Background" Value="{DynamicResource SurfaceAlt}"/>
                                                <Setter Property="Foreground" Value="{DynamicResource TbFg}"/>
						<Setter Property="Template">
							<Setter.Value>
								<ControlTemplate TargetType="{x:Type TextBox}">
									<Border Background="{TemplateBinding Background}"
											BorderBrush="{TemplateBinding BorderBrush}"
											BorderThickness="1" Padding="2">
										<ScrollViewer x:Name="PART_ContentHost" Style="{x:Null}"/>
									</Border>
								</ControlTemplate>
							</Setter.Value>
						</Setter>
					</Style>
                                </ToolBar.Resources>

                                <TextBox x:Name="SearchBox" Width="220"
                                         ToolTip="Sembol ara..."
                                         ToolBar.OverflowMode="Never"
                                         BorderThickness="2"
                                         BorderBrush="{DynamicResource TbChecked}"
                                         Margin="0,0,12,0"
                                         TextChanged="SearchBox_TextChanged"/>

                                <Separator/>
                                <RadioButton x:Name="RbAll" ToolBar.OverflowMode="Never"
                                                         Style="{StaticResource ToolbarRadioStyle}"
                                                         Tag="All" Content="TÃ¼mÃ¼" GroupName="Mode" IsChecked="True"
                                                         Checked="FilterModeChanged" Margin="6,0"/>
				<RadioButton x:Name="RbPos" ToolBar.OverflowMode="Never"
							 Style="{StaticResource ToolbarRadioStyle}"
							 Tag="Positive" Content="YÃ¼kselen" GroupName="Mode"
							 Checked="FilterModeChanged" Margin="6,0"/>
				<RadioButton x:Name="RbNeg" ToolBar.OverflowMode="Never"
							 Style="{StaticResource ToolbarRadioStyle}"
							 Tag="Negative" Content="DÃ¼ÅŸen" GroupName="Mode"
							 Checked="FilterModeChanged" Margin="6,0"/>

				<Separator/>

				<Button Content="% â‰¥ 3" ToolBar.OverflowMode="Never"
						Style="{StaticResource ToolbarButtonStyle}"
						Click="Chip_Pos3_Click" Margin="6,0"/>
				<Button Content="% â‰¤ âˆ’3" ToolBar.OverflowMode="Never"
						Style="{StaticResource ToolbarButtonStyle}"
						Click="Chip_Neg3_Click" Margin="6,0"/>
				<Button Content="Temizle" ToolBar.OverflowMode="Never"
						Style="{StaticResource ToolbarButtonStyle}"
						Click="Chip_Clear_Click" Margin="6,0"/>

				<Separator/>

                                <Button Content="Snapshot Al" ToolBar.OverflowMode="Never"
                                                Style="{StaticResource ToolbarButtonStyle}"
                                                Click="RefreshSymbols_Click" Margin="6,0"/>

				<Separator/>

                                <Button Content="Alarm Ekle" ToolBar.OverflowMode="Never"
                                                Style="{StaticResource ToolbarButtonStyle}"
                                                Click="AddAlert_Click" Margin="6,0"/>
                                <Button Content="AlarmlarÄ± YÃ¶net" ToolBar.OverflowMode="Never"
                                                Style="{StaticResource ToolbarButtonStyle}"
                                                Click="ManageAlerts_Click" Margin="6,0"/>
                                <Separator/>
                                <Separator DockPanel.Dock="Right"/>
                                <Button x:Name="SettingsButton" ToolBar.OverflowMode="Never"
                                        DockPanel.Dock="Right" Style="{StaticResource ToolbarButtonStyle}"
                                        FontSize="16" Width="90" Click="SettingsButton_Click">
                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                                <TextBlock Text="âš™" Margin="0,0,4,0"/>
                                                <TextBlock Text="Ayarlar" FontWeight="Bold"/>
                                        </StackPanel>
                                </Button>
                                </ToolBar>
                        </ToolBarTray>
                </Border>


		<!-- STATUS BAR -->
		<StatusBar DockPanel.Dock="Bottom">
			<StatusBarItem HorizontalAlignment="Left" Margin="0,0,12,0">
				<StackPanel Orientation="Horizontal" VerticalAlignment="Center">
					<TextBlock x:Name="SnapshotInfoText" Text="Snapshot alÄ±nmadÄ±"/>
					<Rectangle Width="12" Fill="Transparent"/>
                                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                                <Border Width="14" Height="14" CornerRadius="3" Background="{DynamicResource Up1Bg}"
                                BorderBrush="#66000000" BorderThickness="1" Margin="0,0,6,0"/>
                                                <TextBlock Text="%1 â€“ %3" VerticalAlignment="Center"/>
                                        </StackPanel>
                                        <Rectangle Width="12" Fill="Transparent"/>
                                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                                <Border Width="14" Height="14" CornerRadius="3" Background="{DynamicResource Up3Bg}"
                                BorderBrush="#66000000" BorderThickness="1" Margin="0,0,6,0"/>
                                                <TextBlock Text="â‰¥%3" Foreground="{DynamicResource Up3Fg}" VerticalAlignment="Center"
                                   Background="#22000000" Padding="0,0,2,0"/>
                                        </StackPanel>
                                        <Rectangle Width="12" Fill="Transparent"/>
                                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                                <Border Width="14" Height="14" CornerRadius="3" Background="{DynamicResource Down1Bg}"
                                BorderBrush="#66000000" BorderThickness="1" Margin="0,0,6,0"/>
                                                <TextBlock Text="-%1 â€“ -%3" VerticalAlignment="Center"/>
                                        </StackPanel>
                                        <Rectangle Width="12" Fill="Transparent"/>
                                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                                <Border Width="14" Height="14" CornerRadius="3" Background="{DynamicResource Down3Bg}"
                                BorderBrush="#66000000" BorderThickness="1" Margin="0,0,6,0"/>
                                                <TextBlock Text="â‰¤-%3" Foreground="{DynamicResource Down3Fg}" VerticalAlignment="Center"
                                   Background="#22000000" Padding="0,0,2,0"/>
                                        </StackPanel>
                </StackPanel>
            </StatusBarItem>

            <StatusBarItem HorizontalAlignment="Right" Margin="0,0,12,0">
                <TextBlock x:Name="WsStateText"/>
            </StatusBarItem>

            <StatusBarItem HorizontalAlignment="Right">
                <TextBlock x:Name="LastUpdateText"/>
            </StatusBarItem>
        </StatusBar>

                <!-- ANA GÃ–VDE -->
		<Grid Grid.Row="1">
			<Grid.RowDefinitions>

				<RowDefinition Height="*"/>
				<RowDefinition Height="Auto"/>

			</Grid.RowDefinitions>

			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="*"/>
				<ColumnDefinition Width="260"/>
			</Grid.ColumnDefinitions>

			<!-- FÄ°YAT TABLOSU -->
			<DataGrid x:Name="Grid"
                      Grid.Row="0" Grid.Column="0"
                      AutoGenerateColumns="False"
                      EnableRowVirtualization="True"
                      IsReadOnly="True"
                      CanUserSortColumns="True"
                      CanUserReorderColumns="True"
                      HeadersVisibility="Column"
                      Background="{DynamicResource SurfaceAlt}"
                      Foreground="{DynamicResource OnSurface}"
                      HorizontalGridLinesBrush="{DynamicResource Divider}"
                      VerticalGridLinesBrush="{DynamicResource Divider}"
                      GridLinesVisibility="All"
                      AlternationCount="2"
                      ScrollViewer.HorizontalScrollBarVisibility="Disabled" Margin="0,0,8,0">

				<!-- SatÄ±r stili -->
				<DataGrid.RowStyle>
					<Style TargetType="DataGridRow">
                                                <Setter Property="Background" Value="{DynamicResource RowBg}"/>
                                                <Setter Property="Foreground" Value="{DynamicResource OnSurface}"/>
                                                <Style.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter Property="Background" Value="{DynamicResource RowHoverBg}"/>
                                                                <Setter Property="Foreground" Value="{DynamicResource OnSurface}"/>
                                                        </Trigger>

							<!-- Renklendirme -->
                                                       <DataTrigger Binding="{Binding IsMove3Plus}" Value="True">
                                                               <Setter Property="Background" Value="{DynamicResource Up3Bg}"/>
                                                               <Setter Property="Foreground" Value="{DynamicResource Up3Fg}"/>
                                                       </DataTrigger>
                                                       <DataTrigger Binding="{Binding IsMove1Plus}" Value="True">
                                                               <Setter Property="Background" Value="{DynamicResource Up1Bg}"/>
                                                               <Setter Property="Foreground" Value="{DynamicResource Up1Fg}"/>
                                                       </DataTrigger>
                                                       <DataTrigger Binding="{Binding IsMoveMinus3}" Value="True">
                                                               <Setter Property="Background" Value="{DynamicResource Down3Bg}"/>
                                                               <Setter Property="Foreground" Value="{DynamicResource Down3Fg}"/>
                                                       </DataTrigger>
                                                       <DataTrigger Binding="{Binding IsMoveMinus1}" Value="True">
                                                               <Setter Property="Background" Value="{DynamicResource Down1Bg}"/>
                                                               <Setter Property="Foreground" Value="{DynamicResource Down1Fg}"/>
                                                       </DataTrigger>

							<!-- Alternating: renklendirme yoksa -->
							<MultiDataTrigger>
								<MultiDataTrigger.Conditions>
									<Condition Binding="{Binding IsMove3Plus}"  Value="False"/>
									<Condition Binding="{Binding IsMove1Plus}"  Value="False"/>
									<Condition Binding="{Binding IsMoveMinus3}" Value="False"/>
									<Condition Binding="{Binding IsMoveMinus1}" Value="False"/>
									<Condition Binding="{Binding RelativeSource={RelativeSource Self},
                                                             Path=(ItemsControl.AlternationIndex)}"
                                               Value="1"/>
								</MultiDataTrigger.Conditions>
								<Setter Property="Background" Value="{DynamicResource RowBgAlt}"/>
							</MultiDataTrigger>

							<DataTrigger Binding="{Binding IsFavorite}" Value="True">
								<Setter Property="FontWeight" Value="Bold"/>
							</DataTrigger>
						</Style.Triggers>
					</Style>
                                </DataGrid.RowStyle>

                                <!-- HÃ¼cre stili -->
                                <DataGrid.CellStyle>
                                        <Style TargetType="DataGridCell" BasedOn="{StaticResource {x:Type DataGridCell}}">
                                                <Style.Triggers>
                                                        <DataTrigger Binding="{Binding IsMove3Plus}" Value="True">
                                                                <Setter Property="Foreground" Value="{DynamicResource Up3Fg}"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding IsMove1Plus}" Value="True">
                                                                <Setter Property="Foreground" Value="{DynamicResource Up1Fg}"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding IsMoveMinus3}" Value="True">
                                                                <Setter Property="Foreground" Value="{DynamicResource Down3Fg}"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding IsMoveMinus1}" Value="True">
                                                                <Setter Property="Foreground" Value="{DynamicResource Down1Fg}"/>
                                                        </DataTrigger>
                                                </Style.Triggers>
                                        </Style>
                                </DataGrid.CellStyle>

                                <!-- Kolonlar -->
                                <DataGrid.Columns>

					<!-- 0) â­ Favori -->
					<DataGridTemplateColumn x:Name="ColStar"
                                            Header="â˜…" Width="32"
                                            IsReadOnly="True" CanUserSort="False">
						<DataGridTemplateColumn.CellTemplate>
							<DataTemplate>
								<ToggleButton Style="{StaticResource StarToggleStyle}"
                                              IsChecked="{Binding IsFavorite, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                              Click="FavoriteToggle_Click"
                                              Cursor="Hand">
									<TextBlock x:Name="StarIcon" Text="â˜†" FontSize="16" Foreground="#AAAAAA"/>
								</ToggleButton>
								<DataTemplate.Triggers>
									<DataTrigger Binding="{Binding IsFavorite}" Value="True">
										<Setter TargetName="StarIcon" Property="TextBlock.Text" Value="â˜…"/>
										<Setter TargetName="StarIcon" Property="TextBlock.Foreground" Value="Gold"/>
									</DataTrigger>
								</DataTemplate.Triggers>
							</DataTemplate>
						</DataGridTemplateColumn.CellTemplate>
                                        </DataGridTemplateColumn>

                                        <!-- 1) Grafik -->
                                        <DataGridTemplateColumn x:Name="ColChart"
                                            Header="Grafik" Width="32"
                                            IsReadOnly="True" CanUserSort="False">
                                                <DataGridTemplateColumn.CellTemplate>
                                                        <DataTemplate>
                                                                <Button Style="{StaticResource ChartButtonStyle}"
                                            Click="ChartButton_Click" Cursor="Hand">
                                                                        <TextBlock Text="ðŸ“ˆ" FontSize="16" Foreground="{DynamicResource SubtleText}"/>
                                                                </Button>
                                                        </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                        </DataGridTemplateColumn>

                                        <!-- 2) Sembol -->
                                        <DataGridTemplateColumn x:Name="ColSymbol"
                                            Header="Sembol"
                                            Width="1.2*" MinWidth="100">
						<DataGridTemplateColumn.CellTemplate>
							<DataTemplate>
								<TextBlock>
									<Run Text="{Binding BaseSymbol, Mode=OneWay}"/>
									<Run Text="/USDT" Foreground="Gray"/>
								</TextBlock>
							</DataTemplate>
						</DataGridTemplateColumn.CellTemplate>
					</DataGridTemplateColumn>

					<!-- BaÅŸlangÄ±Ã§ -->
					<DataGridTextColumn x:Name="ColBaseline" Header="BaÅŸlangÄ±Ã§ FiyatÄ±"
                                        Width="1*" MinWidth="90"
                                        Binding="{Binding BaselinePrice, StringFormat={}{0:#,0.########}, TargetNullValue=-}">
						<DataGridTextColumn.ElementStyle>
							<Style TargetType="TextBlock">
								<Setter Property="TextAlignment" Value="Right"/>
							</Style>
						</DataGridTextColumn.ElementStyle>
					</DataGridTextColumn>

					<!-- Fiyat -->
					<DataGridTextColumn x:Name="ColPrice" Header="Fiyat"
                                        Width="1*" MinWidth="90"
                                        Binding="{Binding Price, StringFormat={}{0:#,0.########}}">
						<DataGridTextColumn.ElementStyle>
							<Style TargetType="TextBlock">
								<Setter Property="TextAlignment" Value="Right"/>
								<Setter Property="ToolTip">
									<Setter.Value>
										<StackPanel>
											<TextBlock Text="{Binding Open,  StringFormat=O: {0:#,0.########}}"/>
											<TextBlock Text="{Binding High,  StringFormat=H: {0:#,0.########}}"/>
											<TextBlock Text="{Binding Low,   StringFormat=L: {0:#,0.########}}"/>
										</StackPanel>
									</Setter.Value>
								</Setter>
							</Style>
						</DataGridTextColumn.ElementStyle>
					</DataGridTextColumn>

                                       <!-- AnlÄ±k DeÄŸiÅŸim -->
                                       <DataGridTemplateColumn x:Name="ColChSnap" Header="AnlÄ±k DeÄŸiÅŸim"
                                       Width="0.9*" MinWidth="80" SortMemberPath="ChangeSinceStartPercent">
                                               <DataGridTemplateColumn.CellTemplate>
                                                       <DataTemplate>
                                                               <Border x:Name="border">
                                                                       <TextBlock x:Name="tb" TextAlignment="Right">
                                                                               <Run x:Name="ArrowRun"/>
                                                                               <Run Text="{Binding ChangeSinceStartPercent, StringFormat=N2}"/>
                                                                       </TextBlock>
                                                               </Border>
                                                               <DataTemplate.Triggers>
                                                                       <DataTrigger Binding="{Binding IsMove3Plus}" Value="True">
                                                                               <Setter TargetName="border" Property="Background" Value="{DynamicResource Up3Bg}"/>
                                                                               <Setter TargetName="tb" Property="Foreground" Value="{DynamicResource Up3Fg}"/>
                                                                               <Setter TargetName="tb" Property="FontWeight" Value="Bold"/>
                                                                               <Setter TargetName="ArrowRun" Property="Text" Value="â–² "/>
                                                                       </DataTrigger>
                                                                       <DataTrigger Binding="{Binding IsMove1Plus}" Value="True">
                                                                               <Setter TargetName="border" Property="Background" Value="{DynamicResource Up1Bg}"/>
                                                                               <Setter TargetName="tb" Property="Foreground" Value="{DynamicResource Up1Fg}"/>
                                                                               <Setter TargetName="tb" Property="FontWeight" Value="Bold"/>
                                                                               <Setter TargetName="ArrowRun" Property="Text" Value="â–² "/>
                                                                       </DataTrigger>
                                                                       <DataTrigger Binding="{Binding IsMoveMinus3}" Value="True">
                                                                               <Setter TargetName="border" Property="Background" Value="{DynamicResource Down3Bg}"/>
                                                                               <Setter TargetName="tb" Property="Foreground" Value="{DynamicResource Down3Fg}"/>
                                                                               <Setter TargetName="tb" Property="FontWeight" Value="Bold"/>
                                                                               <Setter TargetName="ArrowRun" Property="Text" Value="â–¼ "/>
                                                                       </DataTrigger>
                                                                       <DataTrigger Binding="{Binding IsMoveMinus1}" Value="True">
                                                                               <Setter TargetName="border" Property="Background" Value="{DynamicResource Down1Bg}"/>
                                                                               <Setter TargetName="tb" Property="Foreground" Value="{DynamicResource Down1Fg}"/>
                                                                               <Setter TargetName="tb" Property="FontWeight" Value="Bold"/>
                                                                               <Setter TargetName="ArrowRun" Property="Text" Value="â–¼ "/>
                                                                       </DataTrigger>
                                                               </DataTemplate.Triggers>
                                                       </DataTemplate>
                                               </DataGridTemplateColumn.CellTemplate>
                                       </DataGridTemplateColumn>

					<!-- %24s -->
					<DataGridTextColumn x:Name="ColCh24" Header="% 24s"
                                        Width="0.8*" MinWidth="70"
                                        Binding="{Binding ChangePercent, StringFormat=N2}">
						<DataGridTextColumn.ElementStyle>
							<Style TargetType="TextBlock">
								<Setter Property="TextAlignment" Value="Right"/>
							</Style>
						</DataGridTextColumn.ElementStyle>
					</DataGridTextColumn>

					<!-- Detay kolonlarÄ± -->
					<DataGridTextColumn x:Name="ColOpen" Header="AÃ§Ä±lÄ±ÅŸ"
                                        Visibility="Visible"
                                        Width="0.8*" MinWidth="70"
                                        Binding="{Binding Open, StringFormat={}{0:#,0.########}}">
						<DataGridTextColumn.ElementStyle>
							<Style TargetType="TextBlock">
								<Setter Property="TextAlignment" Value="Right"/>
								<Setter Property="TextTrimming" Value="CharacterEllipsis"/>
							</Style>
						</DataGridTextColumn.ElementStyle>
					</DataGridTextColumn>
					<DataGridTextColumn x:Name="ColHigh" Header="YÃ¼ksek"
                                        Visibility="Visible"
                                        Width="0.8*" MinWidth="70"
                                        Binding="{Binding High, StringFormat={}{0:#,0.########}}">
						<DataGridTextColumn.ElementStyle>
							<Style TargetType="TextBlock">
								<Setter Property="TextAlignment" Value="Right"/>
								<Setter Property="TextTrimming" Value="CharacterEllipsis"/>
							</Style>
						</DataGridTextColumn.ElementStyle>
					</DataGridTextColumn>
					<DataGridTextColumn x:Name="ColLow" Header="DÃ¼ÅŸÃ¼k"
                                        Visibility="Visible"
                                        Width="0.8*" MinWidth="70"
                                        Binding="{Binding Low, StringFormat={}{0:#,0.########}}">
						<DataGridTextColumn.ElementStyle>
							<Style TargetType="TextBlock">
								<Setter Property="TextAlignment" Value="Right"/>
								<Setter Property="TextTrimming" Value="CharacterEllipsis"/>
							</Style>
						</DataGridTextColumn.ElementStyle>
					</DataGridTextColumn>

					<!-- Hacim -->
					<DataGridTextColumn x:Name="ColVol" Header="Hacim"
                                        Width="1.3*" MinWidth="110"
                                        Binding="{Binding Volume, StringFormat={}{0:#,0.##}}">
						<DataGridTextColumn.ElementStyle>
							<Style TargetType="TextBlock">
								<Setter Property="TextAlignment" Value="Right"/>
								<Setter Property="TextTrimming" Value="CharacterEllipsis"/>
							</Style>
						</DataGridTextColumn.ElementStyle>
					</DataGridTextColumn>

					<!-- Son -->
					<DataGridTextColumn x:Name="ColLast" Header="Son"
                                        Width="0.8*" MinWidth="80"
                                        Binding="{Binding LastUpdateLocal}"/>
				</DataGrid.Columns>
			</DataGrid>

			<!-- TOP MOVERS -->
			<GroupBox Grid.Row="0" Grid.Column="1" Header="Top Movers" Margin="8,0,8,0"
                      Background="{DynamicResource SurfaceAlt}" Foreground="{DynamicResource OnSurface}"
                      VerticalAlignment="Stretch" BorderBrush="{DynamicResource Divider}">
				<Grid>
                                        <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="*"/>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

                                        <ToggleButton Grid.Row="0" x:Name="btnSnapshot"
                                                      Style="{StaticResource ToolbarToggleButtonStyle}"
                                                      Content="Top Movers: Snapshot"
                                                      Checked="btnSnapshot_Checked"
                                                      Unchecked="btnSnapshot_Unchecked"
                                                      Margin="0,0,0,4" HorizontalAlignment="Center"/>

                                        <TextBlock Grid.Row="1" Text="YÃ¼kselenler" FontWeight="Bold" Margin="0,0,0,4"/>
                                        <ListView Grid.Row="2" x:Name="TopGainersList"
                             Background="{DynamicResource SurfaceAlt}" Foreground="{DynamicResource OnSurface}"
                             ScrollViewer.VerticalScrollBarVisibility="Auto"
                             VirtualizingStackPanel.IsVirtualizing="True"
                             VirtualizingStackPanel.VirtualizationMode="Recycling">
                                               <ListView.ItemContainerStyle>
                                                       <Style TargetType="ListViewItem" BasedOn="{StaticResource {x:Type ListViewItem}}">
                                                               <Style.Triggers>
                                                                       <!-- 3%+ moves: dark green with white text -->
                                                                       <DataTrigger Binding="{Binding IsMove3Plus}" Value="True">
                                                                               <Setter Property="Background" Value="{DynamicResource Up3Bg}"/>
                                                                               <Setter Property="Foreground" Value="{DynamicResource Up3Fg}"/>
                                                                               <Setter Property="TextElement.Foreground" Value="{DynamicResource Up3Fg}"/>
                                                                       </DataTrigger>
                                                                       <!-- 1-3% moves: light green with black text -->
                                                                       <DataTrigger Binding="{Binding IsMove1Plus}" Value="True">
                                                                               <Setter Property="Background" Value="{DynamicResource Up1Bg}"/>
                                                                               <Setter Property="Foreground" Value="{DynamicResource Up1Fg}"/>
                                                                               <Setter Property="TextElement.Foreground" Value="{DynamicResource Up1Fg}"/>
                                                                       </DataTrigger>
                                                                       <!-- Hover: highlight row -->
                                                                       <Trigger Property="IsMouseOver" Value="True">
                                                                               <Setter Property="Background" Value="{DynamicResource RowHoverBg}"/>
                                                                               <Setter Property="Foreground" Value="{DynamicResource OnSurface}"/>
                                                                               <Setter Property="TextElement.Foreground" Value="{DynamicResource OnSurface}"/>
                                                                       </Trigger>
                                                               </Style.Triggers>
                                                       </Style>
                                               </ListView.ItemContainerStyle>
                                                <ListView.View>
                                                        <GridView>
                                                                <GridViewColumn Header="Sembol" Width="80">
                                                                        <GridViewColumn.CellTemplate>
                                                                                <DataTemplate>
                                                                                        <TextBlock>
                                                                                                <Run Text="{Binding BaseSymbol, Mode=OneWay}"/>
                                                                                                <Run Text="/USDT" Foreground="Gray"/>
                                                                                        </TextBlock>
                                                                                </DataTemplate>
                                                                        </GridViewColumn.CellTemplate>
                                                                </GridViewColumn>
                                                                <GridViewColumn Header="%" Width="70">
                                                                        <GridViewColumn.CellTemplate>
                                                                                <DataTemplate>
                                                                                        <TextBlock Text="{Binding Metric, StringFormat={}{0:N2}%}"
                                               TextAlignment="Right" FontFamily="Consolas"/>
                                                                                </DataTemplate>
                                                                        </GridViewColumn.CellTemplate>
                                                                </GridViewColumn>
                                                        </GridView>
                                                </ListView.View>
                                        </ListView>

					<TextBlock Grid.Row="3" Text="DÃ¼ÅŸenler" FontWeight="Bold" Margin="0,6,0,4"/>
                                        <ListView Grid.Row="4" x:Name="TopLosersList"
                             Background="{DynamicResource SurfaceAlt}" Foreground="{DynamicResource OnSurface}"
                             ScrollViewer.VerticalScrollBarVisibility="Auto"
                             VirtualizingStackPanel.IsVirtualizing="True"
                             VirtualizingStackPanel.VirtualizationMode="Recycling">
                                               <ListView.ItemContainerStyle>
                                                       <Style TargetType="ListViewItem" BasedOn="{StaticResource {x:Type ListViewItem}}">
                                                               <Style.Triggers>
                                                                       <!-- -3% or worse: dark red with white text -->
                                                                       <DataTrigger Binding="{Binding IsMoveMinus3}" Value="True">
                                                                               <Setter Property="Background" Value="{DynamicResource Down3Bg}"/>
                                                                               <Setter Property="Foreground" Value="{DynamicResource Down3Fg}"/>
                                                                               <Setter Property="TextElement.Foreground" Value="{DynamicResource Down3Fg}"/>
                                                                       </DataTrigger>
                                                                       <!-- -1% to -3%: light red with black text -->
                                                                       <DataTrigger Binding="{Binding IsMoveMinus1}" Value="True">
                                                                               <Setter Property="Background" Value="{DynamicResource Down1Bg}"/>
                                                                               <Setter Property="Foreground" Value="{DynamicResource Down1Fg}"/>
                                                                               <Setter Property="TextElement.Foreground" Value="{DynamicResource Down1Fg}"/>
                                                                       </DataTrigger>
                                                                       <!-- Hover: highlight row -->
                                                                       <Trigger Property="IsMouseOver" Value="True">
                                                                               <Setter Property="Background" Value="{DynamicResource RowHoverBg}"/>
                                                                               <Setter Property="Foreground" Value="{DynamicResource OnSurface}"/>
                                                                               <Setter Property="TextElement.Foreground" Value="{DynamicResource OnSurface}"/>
                                                                       </Trigger>
                                                               </Style.Triggers>
                                                       </Style>
                                               </ListView.ItemContainerStyle>
                                                <ListView.View>
                                                        <GridView>
                                                                <GridViewColumn Header="Sembol" Width="80">
                                                                        <GridViewColumn.CellTemplate>
                                                                                <DataTemplate>
                                                                                        <TextBlock>
                                                                                                <Run Text="{Binding BaseSymbol, Mode=OneWay}"/>
                                                                                                <Run Text="/USDT" Foreground="Gray"/>
                                                                                        </TextBlock>
                                                                                </DataTemplate>
                                                                        </GridViewColumn.CellTemplate>
                                                                </GridViewColumn>
                                                                <GridViewColumn Header="%" Width="70">
                                                                        <GridViewColumn.CellTemplate>
                                                                                <DataTemplate>
                                                                                        <TextBlock Text="{Binding Metric, StringFormat={}{0:N2}%}"
                                               TextAlignment="Right" FontFamily="Consolas"/>
                                                                                </DataTemplate>
                                                                        </GridViewColumn.CellTemplate>
                                                                </GridViewColumn>
                                                        </GridView>
                                                </ListView.View>
                                        </ListView>
				</Grid>
			</GroupBox>

			<!-- ALARM GEÃ‡MÄ°ÅžÄ° -->
			<Expander Grid.Row="1" Grid.ColumnSpan="2" IsExpanded="True" Padding="6,4">
				<Expander.Header>
					<DockPanel LastChildFill="False">
						<TextBlock Foreground="{DynamicResource OnSurface}"
                                   Text="{Binding ElementName=AlertList, Path=Items.Count, StringFormat=Alarm GeÃ§miÅŸi ({0})}"
                                   FontWeight="Bold" VerticalAlignment="Center"/>
						<StackPanel Orientation="Horizontal" DockPanel.Dock="Right">
							<Button Content="CSV DÄ±ÅŸa Aktar" Click="ExportAlertLog_Click" Margin="8,0,0,0"/>
							<Button Content="Temizle"        Click="ClearAlertLog_Click"  Margin="8,0,0,0"/>
						</StackPanel>
					</DockPanel>
				</Expander.Header>

				<ListView x:Name="AlertList" Margin="0,6,0,0"
                          Loaded="AlertList_Loaded"
                          SizeChanged="AlertList_SizeChanged">
					<ListView.View>
						<GridView>
							<GridViewColumn Header="Zaman"  Width="80"  DisplayMemberBinding="{Binding LocalTime}"/>
							<GridViewColumn Header="Sembol" Width="110">
								<GridViewColumn.CellTemplate>
									<DataTemplate>
										<TextBlock>
											<Run Text="{Binding BaseSymbol, Mode=OneWay}"/>
											<Run Text="/USDT" Foreground="Gray"/>
										</TextBlock>
									</DataTemplate>
								</GridViewColumn.CellTemplate>
							</GridViewColumn>
							<GridViewColumn Header="KoÅŸul"  Width="160" DisplayMemberBinding="{Binding TypeText}"/>
							<GridViewColumn x:Name="MsgColumn" Header="Mesaj" Width="400">
								<GridViewColumn.CellTemplate>
									<DataTemplate>
										<TextBlock Text="{Binding Message}"
                                                   TextTrimming="CharacterEllipsis"
                                                   ToolTip="{Binding Message}"/>
									</DataTemplate>
								</GridViewColumn.CellTemplate>
							</GridViewColumn>
						</GridView>
					</ListView.View>
				</ListView>
			</Expander>
		</Grid>
	</DockPanel>
</Window>
